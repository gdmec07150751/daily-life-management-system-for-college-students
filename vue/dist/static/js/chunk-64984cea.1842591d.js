(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64984cea"],{"0481":function(e,t,n){"use strict";var r=n("23e7"),a=n("a2bf"),i=n("7b0b"),o=n("07fa"),s=n("5926"),l=n("65f0");r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=o(t),r=l(t,0);return r.length=a(r,t,t,n,0,void 0===e?1:s(e)),r}})},"07ac":function(e,t,n){var r=n("23e7"),a=n("6f53").values;r({target:"Object",stat:!0},{values:function(e){return a(e)}})},"2c84":function(e,t,n){},"2f50":function(e,t,n){"use strict";n("c3f4")},3482:function(e,t,n){var r=n("087d"),a=n("5c69"),i=n("4359"),o=n("6747");function s(){var e=arguments.length;if(!e)return[];var t=Array(e-1),n=arguments[0],s=e;while(s--)t[s-1]=arguments[s];return r(o(n)?i(n):[n],a(t,1))}e.exports=s},4069:function(e,t,n){var r=n("44d2");r("flat")},"4b51":function(e,t,n){"use strict";var r=n("5530"),a=n("3482"),i=n.n(a),o=n("51f5"),s=n.n(o),l=n("ded5"),c=n.n(l),d=n("13ea"),u=n.n(d);n("ac1f"),n("1276"),n("d81d"),n("d3b7"),n("159b"),n("b64b"),n("0481"),n("4069"),n("07ac"),n("b0c0");t["a"]={methods:{splitPerms:function(e){if(e){var t=e.split(",");if(t&&t.length>0)return t}return[]},joinPerms:function(e){if(u()(e))return"";var t=e.map((function(e){return c()(e,":")}));return c()(t,",")},flatPerms:function(e){var t=this,n=[];return Object.keys(e).forEach((function(r){var a=e[r]._permission;if(a)n=i()(n,[Object.values(a)].flat());else{var o=t.flatPerms(e[r]);o&&o.length>0&&(n=i()(n,o))}})),n},filterPermToCascader:function(e,t,n){var r=t[e],a=s()(n,(function(e){return e.label===r}));if(a>=0)this.filterPermToCascader(e+1,t,n[a].children);else{var i=e===t.length-1,o={value:r,label:r,children:i?null:[]};n&&n.push(o),i||this.filterPermToCascader(e+1,t,n[n.length-1].children)}},filterMenuToTable:function(e,t){var n=this,a=[];return e.forEach((function(i){var o;if(t||i.parentId||1!==i.type)if(t||i.parentId||0!==i.type)if(t&&t.id===i.parentId&&1===i.type){var s=n.filterMenuToTable(e,i);o=Object(r["a"])({},i),o.children=s}else if(t&&t.id===i.parentId&&0===i.type){var l=n.filterMenuToTable(e,i);o=Object(r["a"])({},i),o.children=l}else t&&t.id===i.parentId&&2===i.type&&(o=Object(r["a"])({},i));else{var c=n.filterMenuToTable(e,i);o=Object(r["a"])({},i),o.children=c}else{var d=n.filterMenuToTable(e,i);o=Object(r["a"])({},i),o.children=d}o&&(o.pid=i.id,a.push(o))})),a},filterMenuToTree:function(e,t){var n=this,r=[];return e.forEach((function(a){var i;if(2!==a.type){if(t||a.parentId||1!==a.type)if(t||a.parentId||0!==a.type){if(t&&t.id===a.parentId&&1===a.type)i={label:a.name};else if(t&&t.id===a.parentId&&0===a.type){var o=n.filterMenuToTree(e,a);i={label:a.name},i.children=o}}else{var s=n.filterMenuToTree(e,a);i={label:a.name},i.children=s}else i={label:a.name};i&&(i.id=a.id,r.push(i))}})),r},filterMenuHasPermsToTree:function(e,t){var n=this,r=[];return e.forEach((function(a){var i;if(t||a.parentId||1!==a.type)if(t||a.parentId||0!==a.type)if(t&&t.id===a.parentId&&1===a.type){var o=n.filterMenuHasPermsToTree(e,a);i={label:a.name},i.children=o}else if(t&&t.id===a.parentId&&0===a.type){var s=n.filterMenuHasPermsToTree(e,a);i={label:a.name},i.children=s}else t&&t.id===a.parentId&&2===a.type&&(i={label:a.name});else{var l=n.filterMenuHasPermsToTree(e,a);i={label:a.name},i.children=l}else{var c=n.filterMenuHasPermsToTree(e,a);i={label:a.name},i.children=c}i&&(i.id=a.id,r.push(i))})),r},filterDeptToTree:function(e,t){var n=this,r=[];return e.forEach((function(a){var i;if(t||a.parentId){if(t&&t.id===a.parentId){var o=n.filterDeptToTree(e,a);i={label:a.name},i.children=o}}else{var s=n.filterDeptToTree(e,a);i={label:a.name},i.children=s}i&&(i.id=a.id,r.push(i))})),r}}}},"501e":function(e,t,n){var r=n("3729"),a=n("1310"),i="[object Number]";function o(e){return"number"==typeof e||a(e)&&r(e)==i}e.exports=o},"6f53":function(e,t,n){var r=n("83ab"),a=n("e330"),i=n("df75"),o=n("fc6a"),s=n("d1e7").f,l=a(s),c=a([].push),d=function(e){return function(t){var n,a=o(t),s=i(a),d=s.length,u=0,p=[];while(d>u)n=s[u++],r&&!l(a,n)||c(p,e?[n,a[n]]:a[n]);return p}};e.exports={entries:d(!0),values:d(!1)}},"75e5":function(e,t,n){},"7f79":function(e,t,n){"use strict";n("75e5")},"92aa":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sys-user-container"},[n("table-layout",{attrs:{wrap:!1,"asside-width":"320px"},scopedSlots:e._u([{key:"asside",fn:function(){return[n("sys-dept-tree-pane",{ref:"deptPane",on:{"dept-change":e.handleDeptChange,"transfer-success":e.handleRefresh}})]},proxy:!0},{key:"header",fn:function(){return[n("div",{staticClass:"user-title"},[e._v("用户管理")])]},proxy:!0}])},[[n("s-table",{ref:"userTable",attrs:{"data-request":e.getUserList,"show-pagination":!0,"row-key":"id",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.$auth("sys.user.add")},on:{click:e.handleAdd}},[e._v("新增")]),n("el-button",{attrs:{size:"mini",type:"success",disabled:!e.$auth("sys.dept.transfer")||e.hasMultipleSelection},on:{click:e.handleTransfer}},[e._v("转移")]),n("warning-confirm-button",{attrs:{"button-type":"danger",closed:e.handleRefresh,disabled:!e.$auth("sys.user.delete")||e.hasMultipleSelection},on:{confirm:e.handleMultipleDelete}},[e._v("删除")])]},proxy:!0}])},[n("el-table-column",{attrs:{fixed:"left",type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"headImg",label:"头像",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.headImg?n("el-avatar",{attrs:{size:"small",src:e.row.headImg}}):n("el-avatar",{attrs:{size:"small",icon:"el-icon-user-solid"}})]}}])}),n("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"150"}}),n("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center",width:"180"}}),n("el-table-column",{attrs:{prop:"departmentName",label:"所在部门",align:"center",width:"180"}}),n("el-table-column",{attrs:{prop:"roleNames",label:"所属角色",align:"center","header-align":"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roleNames,(function(t){return n("el-tag",{key:t,style:{"margin-right":"3px"},attrs:{type:"success",size:"small"}},[e._v(e._s(t))])}))}}])}),n("el-table-column",{attrs:{prop:"nickName",label:"呢称",width:"160",align:"center"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center",width:"300"}}),n("el-table-column",{attrs:{prop:"phone",label:"手机",align:"center",width:"300"}}),n("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center",width:"300"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:1===t.row.status?"success":"danger",effect:"dark",size:"small"}},[e._v(e._s(1===t.row.status?"启用":"禁用"))])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small",disabled:!e.$auth("sys.user.update")},on:{click:function(n){return n.stopPropagation(),e.handleEdit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small",disabled:!e.$auth("sys.user.password")},on:{click:function(n){return n.stopPropagation(),e.handleUpdatePassword(t.row)}}},[e._v("改密")]),n("warning-confirm-button",{attrs:{closed:e.handleRefresh,disabled:!e.$auth("sys.user.delete")},on:{confirm:function(n){e.handleDelete(t.row,n)}}},[e._v("删除")])]}}])})],1)]],2),n("system-permission-user-form-dialog",{ref:"userFormDialog",on:{"save-success":e.handleRefresh}})],1)},a=[],i=n("2909"),o=n("1da1"),s=(n("d81d"),n("96cf"),n("ab09")),l=n("fe2b"),c=n("fbbc"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dept-tree-pane-container"},[n("div",{staticClass:"header-container"},[n("div",{staticClass:"title"},[e._v("组织架构")]),n("div",{staticClass:"op-container"},[n("el-tooltip",{attrs:{effect:"dark",content:"点击新增",placement:"top-start"}},[n("i",{directives:[{name:"permission",rawName:"v-permission",value:"sys.dept.add",expression:"'sys.dept.add'"}],staticClass:"el-icon-plus",on:{click:e.handleAdd}})]),n("el-tooltip",{attrs:{effect:"dark",content:"点击刷新",placement:"top-start"}},[n("i",{staticClass:"el-icon-refresh-right",on:{click:e.refresh}})]),n("el-tooltip",{attrs:{effect:"dark",content:"点击开启拖拽排序",placement:"top-start"}},[n("i",{staticClass:"el-icon-s-operation",on:{click:function(t){e.isDrag=!0}}})]),e.isDrag?n("span",[n("warning-confirm-button",{attrs:{content:"确定保存当前更改的操作？",disabled:!e.$auth("sys.dept.move")},on:{confirm:e.handleSave}},[e._v("保存")]),n("el-button",{attrs:{size:"small",type:"text"},on:{click:e.handleCancel}},[e._v("取消")])],1):e._e()],1)]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tree-container"},[n("el-tree",{ref:"paneTree",staticStyle:{height:"100%"},attrs:{props:{children:"children",label:"label"},data:e.treeList,"highlight-current":"","node-key":"id","expand-on-click-node":!1,"default-expand-all":"",draggable:e.isDrag},on:{"node-click":e.handleNodeClick,"node-drop":e.handleNodeDrop,"node-contextmenu":e.handleShowContextMenu}})],1),n("form-dialog",{ref:"formDialog",scopedSlots:e._u([{key:"slot-parent-node-name",fn:function(t){var r=t.scope;return[n("el-popover",{attrs:{placement:"bottom-start",width:"500"}},[n("el-tree",{style:{"max-height":"400px","overflow-y":"auto"},attrs:{"node-key":"id","expand-on-click-node":!1,data:r.parentNode.data,props:{children:"children",label:"label"}},on:{"node-click":function(e){r.parentNode.id=e.id,r.parentNode.name=e.label}}}),n("el-input",{attrs:{slot:"reference",placeholder:"请选择所属部门",readonly:""},slot:"reference",model:{value:r.parentNode.name,callback:function(t){e.$set(r.parentNode,"name",t)},expression:"scope.parentNode.name"}})],1)]}}])})],1)},u=[],p=n("991b"),f=n.n(p),h=n("501e"),m=n.n(h),v=n("51f5"),b=n.n(v),g=(n("d3b7"),n("159b"),n("4de4"),n("b0c0"),n("d9e2"),n("aa7e")),y=n("4b51"),w=n("e613"),x={name:"SysDeptTreePane",components:{WarningConfirmButton:l["a"],FormDialog:w["a"]},mixins:[y["a"],g["a"]],data:function(){return{isDrag:!1,loading:!1,updateDeptId:-1,depts:[],drops:[]}},computed:{treeList:function(){return this.filterDeptToTree(this.depts,null)},hasRootTreeList:function(){var e={id:-1,label:"#"};return e.children=this.treeList,[e]}},created:function(){this.refresh()},methods:{getDeptList:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?this.treeList:this.depts},getDeptIdChildrenById:function(e){if(e){var t=this.$refs.paneTree.getNode(e),n=function e(t){var n=[];return n.push(t.id),t.children&&t.children.length>0&&t.children.forEach((function(t){n.push(e(t))})),n},r=n(t.data);return f()(r)}return null},refresh:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$api.sys.dept.list();case 4:n=t.sent,r=n.data,e.depts=r||[];case 7:return t.prev=7,e.loading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))()},handleSave:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.done,a=e.close,i=t.drops.filter((function(e){var n=b()(t.depts,(function(t){return t.id===e.id}));if(n<0)return!1;var r=t.depts[n].parentId;return!(!m()(r)&&!m()(e.parentId))&&e.parentId!==r})),n.prev=2,!(i.length>0)){n.next=6;break}return n.next=6,t.$api.sys.dept.move({depts:i});case 6:a(),t.isDrag=!1,t.refresh(),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),r();case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()},handleAdd:function(){this.openDialog()},handleUpdate:function(e){this.openDialog(e)},handleDelete:function(e){var t=this;this.openLoadingConfirm({on:{confirm:function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(r){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=r.done,i=r.close,n.prev=1,n.next=4,t.$api.sys.dept.delete({departmentId:e});case 4:a(),i(),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),a();case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));function r(e){return n.apply(this,arguments)}return r}(),closed:function(){t.refresh()}}})},handleCancel:function(){this.drops&&this.drops.length>0&&(this.drops=[],this.refresh()),this.isDrag=!1},handleNodeClick:function(e){this.$emit("dept-change",e)},handleNodeDrop:function(e,t,n,r){var a=e.data,i="inner"===n?t:t.parent,o=i.data,s=a.id,l="inner"===n?o.id:1===t.level?null:o.id,c=b()(this.drops,(function(e){return e.id===a.id}));c>=0?this.drops[c].parentId=l:this.drops.push({id:s,parentId:l})},handleShowContextMenu:function(e,t){this.$openContextMenu(e,{meta:t,items:[{disabled:!this.$auth("sys.dept.update"),title:"编辑",icon:"el-icon-edit",callback:this.handleContextMenuClick},{disabled:!this.$auth("sys.dept.delete"),title:"删除",icon:"el-icon-delete",callback:this.handleContextMenuClick}]})},handleContextMenuClick:function(e){e.item;var t=e.index,n=e.close,r=e.meta;0===t?this.handleUpdate(r.id):1===t&&this.handleDelete(r.id),n()},handleDialogOpen:function(e,t){var n=this,r=t.showLoading,a=t.hideLoading,i=t.close,o=t.rebind;-1!==this.updateDeptId&&(r(),this.$api.sys.dept.info({departmentId:this.updateDeptId}).then((function(e){var t=e.data,r=t.department,i=t.parentDepartment;r.parentNode={id:i?r.parentId:-1,name:i?i.name:"一级菜单",data:n.hasRootTreeList},o(r),a()})).catch((function(){i()})))},handleDeptFormSubmit:function(e,t){var n=this,r=t.close,a=t.done,i=e.parentNode;e.parentId=i.id,delete e.parentNode;var o=null;-1===this.updateDeptId?o=this.$api.sys.dept.add(e):(e.id=this.updateDeptId,o=this.$api.sys.dept.update(e)),o.then((function(e){n.refresh(),r()})).catch((function(){a()}))},handleTransferFormSubmit:function(e,t,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=n.close,o=n.done,s=t.parentNode,a.prev=2,a.next=5,r.$api.sys.dept.transfer({departmentId:s.id,userIds:e});case 5:i(),r.$emit("transfer-success"),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),o();case 12:case"end":return a.stop()}}),a,null,[[2,9]])})))()},transfer:function(e){var t=this;!e||e.length<=0||this.$refs.formDialog.open({title:"转移部门",on:{submit:function(n,r){t.handleTransferFormSubmit(e,n,r)}},items:[{label:"转移至",prop:"parentNode",value:{id:void 0,name:"",data:this.treeList},rules:{required:!0,trigger:"blur",validator:function(e,t,n){t.id&&m()(t.id)?n():n(new Error("请选择要转移的部门"))}},component:"slot-parent-node-name"}]})},openDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.updateDeptId=e,this.$refs.formDialog.open({title:"编辑部门",on:{open:this.handleDialogOpen,submit:this.handleDeptFormSubmit},items:[{label:"部门名称",value:"",prop:"name",rules:{required:!0,message:"请输入部门名称",trigger:"blur"},component:{name:"el-input",attrs:{placeholder:"请输入部门名称"}}},{label:"上级部门",prop:"parentNode",value:{id:void 0,name:"",data:this.hasRootTreeList},rules:{required:!0,trigger:"blur",validator:function(e,t,n){t.id&&m()(t.id)?n():n(new Error("请选择上级节点"))}},component:"slot-parent-node-name"},{label:"排序号",prop:"orderNum",value:255,component:{name:"el-input-number",style:{width:"100%"},props:{"controls-position":"right",min:0}}}]})}}},k=x,T=(n("e783"),n("2f50"),n("2877")),D=Object(T["a"])(k,d,u,!1,null,"24ca7a24",null),I=D.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form-dialog",{ref:"formDialog",scopedSlots:e._u([{key:"slot-dept-node",fn:function(t){var r=t.scope;return[n("el-popover",{attrs:{placement:"bottom-start",width:"500"}},[n("el-tree",{style:{"max-height":"400px","overflow-y":"auto"},attrs:{"node-key":"id","expand-on-click-node":!1,data:r.deptNode.data,props:{children:"children",label:"label"}},on:{"node-click":function(e){r.deptNode.id=e.id,r.deptNode.value=e.label}}}),n("el-input",{attrs:{slot:"reference",placeholder:"请选择所属部门",readonly:""},slot:"reference",model:{value:r.deptNode.value,callback:function(t){e.$set(r.deptNode,"value",t)},expression:"scope.deptNode.value"}})],1)]}},{key:"slot-roles",fn:function(t){var r=t.scope;return[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择","multiple-limit":3},model:{value:r.roles.value,callback:function(t){e.$set(r.roles,"value",t)},expression:"scope.roles.value"}},e._l(r.roles.data,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)]}},{key:"slot-status",fn:function(t){var r=t.scope;return[n("el-radio-group",{model:{value:r.status,callback:function(t){e.$set(r,"status",t)},expression:"scope.status"}},[n("el-radio",{attrs:{label:1}},[e._v("启用")]),n("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)]}}])})},C=[],_={name:"SystemPermissionUserFormDialog",data:function(){return{updateId:-1}},methods:{handleSubmit:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i,o,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t.done,i=t.close,o=e.deptNode,s=e.roles,delete e.deptNode,delete e.roles,e.departmentId=o.id,e.roles=s.value,l=null,-1===n.updateId?l=n.$api.sys.user.add(e):(e.id=n.updateId,l=n.$api.sys.user.update(e)),l.then((function(e){n.$emit("save-success"),i()})).catch((function(){a()}));case 9:case"end":return r.stop()}}),r)})))()},handleOpen:function(e,t,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,o,s,l,c,d,u,p,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=n.showLoading,o=n.hideLoading,s=n.close,l=n.rebind,a.prev=1,i(),a.next=5,r.$api.sys.role.list();case 5:if(c=a.sent,d=c.data,-1!==r.updateId){a.next=11;break}t.roles.data=d,a.next=19;break;case 11:return a.next=13,r.$api.sys.user.info({userId:r.updateId});case 13:u=a.sent,p=u.data,f=p.roles,p.roles={value:f,data:d},p.deptNode={id:p.departmentId,value:p.departmentName,data:e},l(p);case 19:o(),a.next=25;break;case 22:a.prev=22,a.t0=a["catch"](1),s();case 25:case"end":return a.stop()}}),a,null,[[1,22]])})))()},open:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(!e)throw new Error("dept tree must not null");if(!m()(n))throw new Error("update id must be a number");this.updateId=n,this.$refs.formDialog.open({title:"编辑用户",on:{open:function(n,r){t.handleOpen(e,n,r)},submit:this.handleSubmit},items:[{label:"所属部门",prop:"deptNode",value:{id:void 0,value:"",data:e},rules:{required:!0,trigger:"blur",validator:function(e,t,n){t.id&&m()(t.id)?n():n(new Error("请选择所属部门"))}},component:"slot-dept-node"},{label:"所属角色",prop:"roles",value:{value:[],data:[]},rules:{required:!0,trigger:"blur",validator:function(e,t,n){t.value.length<=0?n(new Error("请选择所属角色")):n()}},component:"slot-roles"},{label:"用户名",prop:"username",value:"",rules:{required:!0,trigger:"blur",message:"请输入用户名"},component:{name:"el-input",attrs:{placeholder:"请输入用户名"}}},{label:"姓名",prop:"name",value:"",span:12,rules:{required:!0,trigger:"blur",message:"请输入姓名"},component:{name:"el-input",attrs:{placeholder:"请输入姓名"}}},{label:"呢称",prop:"nickName",value:"",span:12,component:{name:"el-input",attrs:{placeholder:"请输入呢称"}}},{label:"邮箱",prop:"email",value:"",span:12,component:{name:"el-input",attrs:{placeholder:"请输入邮箱"}}},{label:"手机",prop:"phone",value:"",span:12,component:{name:"el-input",attrs:{placeholder:"请输入手机号码"}}},{label:"备注",prop:"remark",value:"",component:{name:"el-input",props:{type:"textarea",rows:2}}},{label:"状态",prop:"status",value:1,component:"slot-status"}]})}}},S=_,N=Object(T["a"])(S,$,C,!1,null,null,null),L=N.exports,O={name:"SystemPermissionUser",components:{STable:s["a"],TableLayout:c["a"],SysDeptTreePane:I,WarningConfirmButton:l["a"],SystemPermissionUserFormDialog:L},data:function(){return{currentDeptId:-1,selectionUserList:[]}},computed:{hasMultipleSelection:function(){return this.selectionUserList.length<=0}},watch:{currentDeptId:function(){this.handleRefresh()}},methods:{getUserList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.page,a=e.limit,i=-1===t.currentDeptId,n.next=4,t.$api.sys.user.page({page:r,limit:a,departmentIds:i?void 0:t.$refs.deptPane.getDeptIdChildrenById(t.currentDeptId)});case 4:return o=n.sent,s=o.data,n.abrupt("return",{list:s.list,pagination:{total:s.pagination.total}});case 7:case"end":return n.stop()}}),n)})))()},handleDeptChange:function(e){this.currentDeptId=e.id},handleSelectionChange:function(e){!e||e.length<=0?this.selectionUserList=[]:this.selectionUserList=e.map((function(e){return e.id}))},handleRefresh:function(){this.$refs.userTable.refresh()},handleAdd:function(){this.$refs.userFormDialog.open(this.$refs.deptPane.getDeptList())},handleEdit:function(e){this.$refs.userFormDialog.open(this.$refs.deptPane.getDeptList(),e.id)},handleUpdatePassword:function(e){var t=this;this.$openFormDialog({title:"更改管理员（".concat(e.username,"）密码"),on:{submit:function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(r,a){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=a.close,o=a.done,n.prev=1,n.next=4,t.$api.sys.user.password({userId:e.id,password:r.password});case 4:i(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),o();case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));function r(e,t){return n.apply(this,arguments)}return r}()},items:[{label:"新密码",value:"",prop:"password",rules:{required:!0,message:"请输入新密码",trigger:"blur"},component:{name:"el-input",attrs:{placeholder:"请输入新密码"}}}]})},handleTransfer:function(){this.$refs.deptPane.transfer(Object(i["a"])(this.selectionUserList))},handleDelete:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.close,i=t.done,r.prev=1,r.next=4,n.$api.sys.user.delete({userIds:[e.id]});case 4:a(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),i();case 10:case"end":return r.stop()}}),r,null,[[1,7]])})))()},handleMultipleDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.close,a=e.done,n.prev=1,n.next=4,t.$api.sys.user.delete({userIds:Object(i["a"])(t.selectionUserList)});case 4:r(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),a();case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}},R=O,j=(n("7f79"),n("fb4b"),Object(T["a"])(R,r,a,!1,null,"6e8659c9",null));t["default"]=j.exports},"991b":function(e,t,n){var r=n("5c69"),a=1/0;function i(e){var t=null==e?0:e.length;return t?r(e,a):[]}e.exports=i},a2bf:function(e,t,n){"use strict";var r=n("da84"),a=n("e8b5"),i=n("07fa"),o=n("0366"),s=r.TypeError,l=function(e,t,n,r,c,d,u,p){var f,h,m=c,v=0,b=!!u&&o(u,p);while(v<r){if(v in n){if(f=b?b(n[v],v,t):n[v],d>0&&a(f))h=i(f),m=l(e,t,f,h,m,d-1)-1;else{if(m>=9007199254740991)throw s("Exceed the acceptable array length");e[m]=f}m++}v++}return m};e.exports=l},aa7e:function(e,t,n){"use strict";t["a"]={methods:{openLoadingConfirm:function(e){var t=e.on,n=e.content,r=void 0===n?"此操作无法恢复，是否继续？":n,a=e.title,i=void 0===a?"警告":a,o=e.confirmButtonText,s=void 0===o?"确定":o,l=e.cancelButtonText,c=void 0===l?"取消":l,d=e.type,u=void 0===d?"warning":d,p=t.confirm,f=t.cancel,h=t.closed;this.$confirm(r,i,{confirmButtonText:s,cancelButtonText:c,type:u,beforeClose:function(e,t,n){"confirm"===e?(t.confirmButtonLoading=!0,p&&p({close:n,done:function(){t.confirmButtonLoading=!1}})):(t.confirmButtonLoading=!1,n())}}).then((function(e){h&&h(e)})).catch((function(e){f&&f()}))}}}},c3f4:function(e,t,n){},ded5:function(e,t){var n=Array.prototype,r=n.join;function a(e,t){return null==e?"":r.call(e,t)}e.exports=a},e783:function(e,t,n){"use strict";n("f1d6")},f1d6:function(e,t,n){},fb4b:function(e,t,n){"use strict";n("2c84")},fe2b:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-button",{attrs:{size:e.size,type:e.buttonType,disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e._handleClick.apply(null,arguments)}}},[e._t("default")],2)},a=[],i={name:"WarningConfirmButton",props:{content:{type:String,default:"此操作无法恢复，是否继续？"},title:{type:String,default:"警告"},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},iconType:{type:String,default:"warning",validator:function(e){return-1!==["success","info","warning","error"].indexOf(e)}},size:{type:String,default:"mini"},buttonType:{type:String,default:"text"},disabled:{type:Boolean,default:!1},closed:{type:Function,default:function(){return function(){}}},cancel:{type:Function,default:function(){return function(){}}}},data:function(){return{loading:!1}},methods:{_handleClick:function(){var e=this;this.$confirm(this.content,this.title,{confirmButtonText:this.confirmButtonText,cancelButtonText:this.cancelButtonText,type:this.iconType,beforeClose:function(t,n,r){"confirm"===t?(n.confirmButtonLoading=!0,e.$emit("confirm",{close:function(){n.confirmButtonLoading=!1,r()},done:function(){n.confirmButtonLoading=!1}})):(n.confirmButtonLoading=!1,r())}}).then((function(t){e.closed()})).catch((function(t){e.cancel()}))}}},o=i,s=n("2877"),l=Object(s["a"])(o,r,a,!1,null,null,null);t["a"]=l.exports}}]);