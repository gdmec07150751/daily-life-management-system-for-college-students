(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66b8f0de"],{a704:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sys-param-config-container"},[n("table-layout",[n("s-table",{ref:"configTable",attrs:{"data-request":e.getConfigList,"show-pagination":"",stripe:"","row-key":"id",border:""},on:{"selection-change":e.handleSelectionChange},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.$auth("sys.paramConfig.add")},on:{click:e.handleAdd}},[e._v("新增")]),n("warning-confirm-button",{attrs:{"button-type":"danger",closed:e.handleRefresh,disabled:!e.$auth("sys.paramConfig.delete")||e.disableMultiDelete},on:{confirm:function(t){e.handleDelete(null,t)}}},[e._v("删除")])]},proxy:!0}])},[n("el-table-column",{attrs:{fixed:"left",type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"参数名称",align:"center",width:"220","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{prop:"key",width:"220","show-overflow-tooltip":"",label:"参数键名",align:"center"}}),n("el-table-column",{attrs:{prop:"value",width:"320","show-overflow-tooltip":"",label:"参数值",align:"center"}}),n("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"",width:"300",label:"备注",align:"center"}}),n("el-table-column",{attrs:{prop:"createdAt",width:"180",label:"创建时间",align:"center"}}),n("el-table-column",{attrs:{prop:"updatedAt",width:"180",label:"更新时间",align:"center"}}),n("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{disabled:!e.$auth("sys.paramConfig.update"),size:"mini",type:"text"},on:{click:function(n){return n.stopPropagation(),e.handleEdit(t.row)}}},[e._v("编辑")]),n("warning-confirm-button",{attrs:{closed:e.handleRefresh,disabled:!e.$auth("sys.paramConfig.delete")},on:{confirm:function(n){e.handleDelete(t.row,n)}}},[e._v("删除")])]}}])})],1)],1)],1)},r=[],i=n("5530"),o=n("1da1"),l=(n("d81d"),n("96cf"),n("fbbc")),c=n("ab09"),u=n("fe2b"),s={name:"SystemParamConfig",components:{TableLayout:l["a"],STable:c["a"],WarningConfirmButton:u["a"]},data:function(){return{selectionId:[]}},computed:{disableMultiDelete:function(){return this.selectionId.length<=0}},methods:{handleRefresh:function(){this.$refs.configTable.refresh()},getConfigList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.page,r=e.limit,n.next=3,t.$api.sys.paramConfig.page({page:a,limit:r});case 3:return i=n.sent,o=i.data,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))()},handleSelectionChange:function(e){this.selectionId=e.map((function(e){return e.id}))},handleAdd:function(){this.createFormDialog()},handleDelete:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.done,i=t.close,a.prev=1,a.next=4,n.$api.sys.paramConfig.delete({ids:e?[e.id]:n.selectionId});case 4:i(),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),r();case 10:case"end":return a.stop()}}),a,null,[[1,7]])})))()},handleEdit:function(e){this.createFormDialog(e.id)},createFormDialog:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.$openFormDialog({title:"编辑参数配置",formProps:{"label-width":"100px"},on:{open:function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(a,r){var i,o,l,c,u,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=r.showLoading,o=r.hideLoading,l=r.close,c=r.rebind,-1===t){n.next=15;break}return n.prev=2,i(),n.next=6,e.$api.sys.paramConfig.info({id:t});case 6:u=n.sent,s=u.data,c(s),o(),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](2),l();case 15:case"end":return n.stop()}}),n,null,[[2,12]])})));function a(e,t){return n.apply(this,arguments)}return a}(),submit:function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(a,r){var o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=r.close,l=r.done,n.prev=1,-1!==t){n.next=7;break}return n.next=5,e.$api.sys.paramConfig.add(a);case 5:n.next=10;break;case 7:return delete a.key,n.next=10,e.$api.sys.paramConfig.update(Object(i["a"])({id:t},a));case 10:o(),e.handleRefresh(),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](1),l();case 17:case"end":return n.stop()}}),n,null,[[1,14]])})));function a(e,t){return n.apply(this,arguments)}return a}()},items:[{prop:"name",label:"参数名称",value:"",rules:{required:!0,trigger:"blur",message:"请输入参数名称"},component:{name:"el-input",attrs:{placeholder:"请输入参数名称"}}},{prop:"key",label:"参数键名",value:"",rules:{required:!0,trigger:"blur",message:"请输入参数键名"},component:{name:"el-input",attrs:{placeholder:"请输入参数键名"},props:{disabled:-1!==t}}},{prop:"value",label:"参数值",value:"",rules:{required:!0,trigger:"blur",message:"请输入参数值"},component:{name:"el-input",attrs:{placeholder:"请输入参数值"}}},{prop:"remark",label:"备注",value:"",component:{name:"el-input",props:{type:"textarea",rows:2}}}]})}}},d=s,p=n("2877"),f=Object(p["a"])(d,a,r,!1,null,"af3dd698",null);t["default"]=f.exports},fe2b:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-button",{attrs:{size:e.size,type:e.buttonType,disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e._handleClick.apply(null,arguments)}}},[e._t("default")],2)},r=[],i={name:"WarningConfirmButton",props:{content:{type:String,default:"此操作无法恢复，是否继续？"},title:{type:String,default:"警告"},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},iconType:{type:String,default:"warning",validator:function(e){return-1!==["success","info","warning","error"].indexOf(e)}},size:{type:String,default:"mini"},buttonType:{type:String,default:"text"},disabled:{type:Boolean,default:!1},closed:{type:Function,default:function(){return function(){}}},cancel:{type:Function,default:function(){return function(){}}}},data:function(){return{loading:!1}},methods:{_handleClick:function(){var e=this;this.$confirm(this.content,this.title,{confirmButtonText:this.confirmButtonText,cancelButtonText:this.cancelButtonText,type:this.iconType,beforeClose:function(t,n,a){"confirm"===t?(n.confirmButtonLoading=!0,e.$emit("confirm",{close:function(){n.confirmButtonLoading=!1,a()},done:function(){n.confirmButtonLoading=!1}})):(n.confirmButtonLoading=!1,a())}}).then((function(t){e.closed()})).catch((function(t){e.cancel()}))}}},o=i,l=n("2877"),c=Object(l["a"])(o,a,r,!1,null,null,null);t["a"]=c.exports}}]);