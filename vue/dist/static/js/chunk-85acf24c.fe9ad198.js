(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85acf24c"],{4565:function(e,r,t){"use strict";t("6bec")},"64ac":function(e,r,t){},"6bec":function(e,r,t){},d5c2:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register-container"},[t("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{size:"small",model:e.registerForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v(e._s(e.title))])]),t("el-form-item",{attrs:{prop:"selectedRole"}},[t("el-select",{staticClass:"register-select",attrs:{placeholder:"请选择用户身份"},model:{value:e.registerForm.selectedRole,callback:function(r){e.$set(e.registerForm,"selectedRole",r)},expression:"registerForm.selectedRole"}},e._l(e.rolesArr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"username"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{ref:"username",attrs:{placeholder:"账号",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}}),t("span",{staticClass:"show-pwd",on:{click:function(r){return e.showPwd(0)}}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),t("el-form-item",{attrs:{prop:"confirmPassword"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{ref:"confirmPassword",attrs:{type:e.confirmPasswordType,placeholder:"确认密码",name:"confirmPasswordType",tabindex:"2","auto-complete":"on"},model:{value:e.registerForm.confirmPassword,callback:function(r){e.$set(e.registerForm,"confirmPassword",r)},expression:"registerForm.confirmPassword"}}),t("span",{staticClass:"show-pwd",on:{click:function(r){return e.showPwd(1)}}},[t("svg-icon",{attrs:{"icon-class":"password"===e.confirmPasswordType?"eye":"eye-open"}})],1)],1),t("el-form-item",{attrs:{prop:"verifyCode"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"captcha"}})],1),t("el-input",{key:e.passwordType,ref:"verifyCode",attrs:{placeholder:"验证码",name:"verifyCode",tabindex:"3"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.registerForm.verifyCode,callback:function(r){e.$set(e.registerForm,"verifyCode",r)},expression:"registerForm.verifyCode"}}),t("div",{staticClass:"img-captcha-container"},[t("img",{attrs:{src:e.captchaImageBase64},on:{click:e.handleRefreshCaptcha}})])],1),t("el-button",{staticClass:"btn",staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleRegister.apply(null,arguments)}}},[e._v("注册")])],1)],1)},a=[],n=t("1da1"),o=(t("96cf"),t("d9e2"),t("778c")),i=t.n(o),c=t("7ded"),l={name:"Register",data:function(){var e=this,r=function(e,r,t){r.length<2?t(new Error("请输入合法的账号")):t()},t=function(e,r,t){return r.length<6?(t(new Error("密码不能少于6位")),!0):(t(),!1)},s=function(r,t,s){return e.registerForm.password!==t?(s(new Error("密码不一致")),!1):(s(),!0)},a=function(e,r,t){4!==r.length?t(new Error("请输入合法的验证码")):t()};return{title:i.a.title,registerForm:{selectedRole:"",username:"",password:"",confirmPassword:"",verifyCode:"",captchaId:""},captchaImageBase64:"",loginRules:{username:[{required:!0,trigger:"blur",validator:r}],password:[{required:!0,trigger:"blur",validator:t}],confirmPassword:[{required:!0,trigger:"blur",validator:s}],verifyCode:[{required:!0,trigger:"blur",validator:a}]},loading:!1,passwordType:"password",confirmPasswordType:"password",redirect:void 0,rolesArr:[{value:"学生",label:"学生"},{value:"教师",label:"教师"}]}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.handleRefreshCaptcha();case 1:case"end":return r.stop()}}),r)})))()},methods:{showPwd:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="passwordType";0===r&&(t="passwordType"),1===r&&(t="confirmPasswordType"),"password"===this[t]?this[t]="":this[t]="password",0===r&&this.$nextTick((function(){e.$refs.password.focus()})),1===r&&this.$nextTick((function(){e.$refs.confirmPassword.focus()}))},handleLogin:function(){var e=this;this.$refs.registerForm.validate((function(r){if(!r)return!1;e.loading=!0,e.$store.dispatch("user/register",e.registerForm).then((function(){})).catch((function(r){e.loading=!1,r.code&&10003===r.code&&e.handleRefreshCaptcha()}))}))},handleRegister:function(){},handleRefreshCaptcha:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var t,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["getImageCaptcha"])({width:100,height:50});case 2:t=r.sent,s=t.data,e.registerForm.captchaId=s.id,e.captchaImageBase64=s.img;case 6:case"end":return r.stop()}}),r)})))()}}},d=l,u=(t("4565"),t("e267"),t("2877")),p=Object(u["a"])(d,s,a,!1,null,"30025552",null);r["default"]=p.exports},e267:function(e,r,t){"use strict";t("64ac")}}]);